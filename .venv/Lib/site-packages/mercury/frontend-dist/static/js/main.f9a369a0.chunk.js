(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{193:function(e,t,a){},293:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(39),s=a(313),i=a(5),r=a(11),c=a(20),l=a(6),d=a.n(l),u=a(13),b=a(25),p=a(22),j=a(101),h=a(75),v=a.n(h),f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=sessionStorage.getItem("sessionId");return(null==t||e)&&(t=Object(j.v4)(),sessionStorage.setItem("sessionId",t)),t},m=function(e){"undefined"!==typeof e&&e?s.a.defaults.headers.common.Authorization="Token "+e:delete s.a.defaults.headers.common.Authorization},x=function(e,t){s.a.get(e,{responseType:"blob"}).then((function(e){v()(e.data,t)}))},O=null;localStorage.getItem("token")&&(O=localStorage.getItem("token"),m(O));var g={token:O,username:"",user:{pk:0,username:"",first_name:"",last_name:"",email:""}},y=Object(b.b)({name:"auth",initialState:g,reducers:{setToken:function(e,t){e.token=t.payload,m(e.token),e.token?localStorage.setItem("token",e.token):localStorage.removeItem("token")},setUsername:function(e,t){e.username=t.payload?t.payload:"",e.username&&""!==e.username?localStorage.setItem("username",e.username):localStorage.removeItem("username")},setUserInfo:function(e,t){e.user=t.payload}}}),w=y.reducer,k=y.actions,N=k.setToken,S=k.setUsername,P=k.setUserInfo,T=function(e){return e.auth.token},_=function(e){return e.auth.username},C=function(e){return e.auth.user},R=a(9),E=(a(193),a(0));function A(){return Object(E.jsx)("div",{style:{color:"white",padding:"5px",float:"right"},children:Object(E.jsxs)(c.b,{to:"/login",className:"btn btn-primary btn-sm ",children:[Object(E.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})})}function L(e){var t=e.username,a=Object(i.b)(),n=Object(r.o)();return Object(E.jsx)("div",{children:Object(E.jsxs)("div",{className:"dropdown",style:{float:"right"},children:[Object(E.jsx)("a",{className:"btn btn-secondary btn-sm dropdown-toggle",style:{margin:"5px"},href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false",children:t}),Object(E.jsxs)("ul",{className:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuLink",children:[Object(E.jsx)("li",{children:Object(E.jsxs)("a",{className:"dropdown-item",href:"/account",children:[Object(E.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," Account"]})}),Object(E.jsx)("li",{children:Object(E.jsx)("hr",{className:"dropdown-divider"})}),Object(E.jsx)("li",{children:Object(E.jsxs)("a",{className:"dropdown-item",onClick:function(){return a(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,s.a.post("/api/v1/auth/logout/");case 4:p.b.success("Log out successfull"),a(N("")),a(S("")),e("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),p.b.error("Problem during log out");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(n))},children:[Object(E.jsx)("i",{className:"fa fa-sign-out","aria-hidden":"true"})," Log out"]})})]})]})})}function D(e){var t=e.isSitePublic,a=e.username;return Object(E.jsxs)("header",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0",children:[Object(E.jsx)(c.b,{className:"navbar-brand col-md-3 col-lg-3 me-0 px-3",to:"/",children:Object(E.jsx)("img",{alt:"Mercury",src:"/static/mercury_logo.svg",style:{height:"28px",paddingLeft:"10px"}})}),!t&&""===a&&Object(E.jsx)(A,{}),""!==a&&Object(E.jsx)(L,{username:a})]})}var U=a(14),F=a(27),W=Object(b.b)({name:"app",initialState:{view:"app",files:[],filesState:"unknown",showSideBar:!0,storageType:"media"},reducers:{setView:function(e,t){e.view=t.payload},setFilesState:function(e,t){e.filesState=t.payload},setFiles:function(e,t){e.files=t.payload},setShowSideBar:function(e,t){e.showSideBar=t.payload},toggleShowSideBar:function(e){e.showSideBar=!e.showSideBar},setStorageType:function(e,t){e.storageType=t.payload}}}),I=W.reducer,M=W.actions,H=M.setView,B=M.setFilesState,V=M.setFiles,z=M.setShowSideBar,K=(M.toggleShowSideBar,M.setStorageType),J=function(e){return e.app.view},q=function(e){return e.app.filesState},Y=function(e){return e.app.files},G=function(e){return e.app.showSideBar},Q=function(e){return e.app.storageType},Z=function(e,t,a){return function(){var n=Object(u.a)(d.a.mark((function n(o){var i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i={site_id:e,session_id:t,filename:a},"/api/v1/nb-delete-file",n.next=5,s.a.post("/api/v1/nb-delete-file",i);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Problem with file upload. ".concat(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()};function X(e){return"select"===e.input}function $(e){return"checkbox"===e.input}function ee(e){return"numeric"===e.input}function te(e){return"slider"===e.input}function ae(e){return"range"===e.input}function ne(e){return"file"===e.input}function oe(e){return"text"===e.input}function se(e){return"dir"===e.output}function ie(e){return"markdown"===e.output}function re(e){return"button"===e.input}function ce(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var le={notebooks:[],loadingState:"loading",selectedNotebook:{},selectedNotebookId:void 0,loadingStateSelected:"loading",watchModeCounter:0,slidesHash:"",widgets:{},widgetsUrlValues:{},nbIframes:{},widgetsInitialized:!1,urlValuesUsed:!1},de=Object(b.b)({name:"notebooks",initialState:le,reducers:{setWidgetValue:function(e,t){var a=t.payload,n=a.key,o=a.value;e.widgets[n]=o},setWidgetUrlValue:function(e,t){var a=t.payload,n=a.key,o=a.value;e.widgetsUrlValues[n]=o},clearWidgets:function(e){e.widgets={}},clearWidgetsUrlValues:function(e){e.widgetsUrlValues={}},setNotebooks:function(e,t){e.notebooks=t.payload},setLoadingState:function(e,t){e.loadingState=t.payload},setSelectedNotebook:function(e,t){t.payload.state.startsWith("WATCH")&&e.selectedNotebook.file_updated_at===t.payload.file_updated_at||(e.selectedNotebook=t.payload,e.selectedNotebookId=e.selectedNotebook.id),t.payload.state.startsWith("WATCH")&&(e.watchModeCounter+=1)},setLoadingStateSelected:function(e,t){e.loadingStateSelected=t.payload},setSlidesHash:function(e,t){e.slidesHash=t.payload},updateWidgetsParams:function(e,t){for(var a=t.payload.widgetKey,n=!1,o=!0,s=0,i=Object.keys(e.selectedNotebook.params.params);s<i.length;s++){var r=i[s];if(r===a){o=!1;var c=Object(U.a)({},e.selectedNotebook.params.params[a]);ae(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.min!==t.payload.min&&(c.min=t.payload.min,e.widgets[r]=t.payload.value,n=!0),c.max!==t.payload.max&&(c.max=t.payload.max,e.widgets[r]=t.payload.value,n=!0),c.step!==t.payload.step&&(c.step=t.payload.step,e.widgets[r]=t.payload.value,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0)):oe(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.rows!==t.payload.rows&&(c.rows=t.payload.rows,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0)):te(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.min!==t.payload.min&&(c.min=t.payload.min,e.widgets[r]=t.payload.value,n=!0),c.max!==t.payload.max&&(c.max=t.payload.max,e.widgets[r]=t.payload.value,n=!0),c.step!==t.payload.step&&(c.step=t.payload.step,e.widgets[r]=t.payload.value,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0)):X(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.choices.toString()!==t.payload.choices.toString()&&(c.choices=t.payload.choices,e.widgets[r]=t.payload.value,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0)):$(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0)):ee(c)?(c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.min!==t.payload.min&&(c.min=t.payload.min,e.widgets[r]=t.payload.value,n=!0),c.max!==t.payload.max&&(c.max=t.payload.max,e.widgets[r]=t.payload.value,n=!0),c.step!==t.payload.step&&(c.step=t.payload.step,e.widgets[r]=t.payload.value,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0)):ie(c)?c.value!==t.payload.value&&(c.value=t.payload.value,n=!0):re(c)?(e.widgets[r]=t.payload.value,c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0),c.style!==t.payload.style&&(c.style=t.payload.style,n=!0)):ne(c)&&(e.widgets[r]=t.payload.value,c.disabled!==t.payload.disabled&&(c.disabled=t.payload.disabled,e.widgets[r]=t.payload.value,n=!0),c.hidden!==t.payload.hidden&&(c.hidden=t.payload.hidden,e.widgets[r]=t.payload.value,n=!0),c.label!==t.payload.label&&(c.label=t.payload.label,n=!0)),n&&(e.selectedNotebook.params.params[a]=c)}}o&&(e.selectedNotebook.params.params[a]=t.payload)},hideWidgets:function(e,t){var a,n=t.payload.keys,o=Object(F.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;s in e.selectedNotebook.params.params&&delete e.selectedNotebook.params.params[s]}}catch(i){o.e(i)}finally{o.f()}},initWidgets:function(e,t){var a=t.payload.widgets;e.selectedNotebook.params.params={},e.widgets={};var n,o=Object(F.a)(a);try{for(o.s();!(n=o.n()).done;){var s=n.value;e.selectedNotebook.params.params[s.widgetKey]=s,e.widgets[s.widgetKey]=s.value}}catch(i){o.e(i)}finally{o.f()}},updateTitle:function(e,t){e.selectedNotebook.title=t.payload},updateShowCode:function(e,t){e.selectedNotebook.params["show-code"]=t.payload},setNbIframes:function(e,t){e.nbIframes=t.payload},setWidgetsInitialized:function(e,t){e.widgetsInitialized=t.payload},setUrlValuesUsed:function(e,t){e.urlValuesUsed=t.payload}}}),ue=de.reducer,be=de.actions,pe=be.setNotebooks,je=be.setLoadingState,he=be.setSelectedNotebook,ve=be.setLoadingStateSelected,fe=be.setSlidesHash,me=be.updateWidgetsParams,xe=be.hideWidgets,Oe=be.setWidgetValue,ge=be.setWidgetUrlValue,ye=(be.clearWidgets,be.clearWidgetsUrlValues),we=be.initWidgets,ke=be.updateTitle,Ne=be.updateShowCode,Se=(be.setNbIframes,be.setWidgetsInitialized),Pe=be.setUrlValuesUsed,Te=function(e){return e.notebooks.notebooks},_e=function(e){return e.notebooks.loadingState},Ce=function(e){return e.notebooks.selectedNotebook},Re=function(e){return e.notebooks.selectedNotebookId},Ee=function(e){var t,a,n=null===(t=e.notebooks.selectedNotebook)||void 0===t||null===(a=t.params)||void 0===a?void 0:a.static_notebook;return void 0!==n&&n},Ae=function(e){return e.notebooks.loadingStateSelected},Le=function(e){return e.notebooks.slidesHash},De=function(e){return e.notebooks.widgets},Ue=function(e){return e.notebooks.widgetsUrlValues},Fe=function(e){return e.notebooks.widgetsInitialized},We=function(e){return e.notebooks.urlValuesUsed},Ie=Object(b.b)({name:"tasks",initialState:{currentTask:{},historicTask:{},showCurrent:!0,previousTask:{},exportingToPDF:!1,exportToPDFJobId:"",exportToPDFCounter:0,executionHistory:[]},reducers:{setShowCurrent:function(e,t){e.showCurrent=t.payload},setCurrentTask:function(e,t){e.currentTask=t.payload},setHistoricTask:function(e,t){e.historicTask=t.payload},setPreviousTask:function(e,t){e.previousTask=t.payload},copyCurrentToPreviousTask:function(e){e.previousTask=e.currentTask},setExportingToPDF:function(e,t){e.exportingToPDF=t.payload},setExportToPDFJobId:function(e,t){e.exportToPDFJobId=t.payload},resetExportToPDFCounter:function(e){e.exportToPDFCounter=0},increaseExportToPDFCounter:function(e){e.exportToPDFCounter+=1},stopPDFExport:function(e){e.exportingToPDF=!1,e.exportToPDFJobId="",e.exportToPDFCounter=0},setExecutionHistory:function(e,t){e.executionHistory=t.payload},clearExecutionHistory:function(e){e.executionHistory=[]}}}),Me=Ie.reducer,He=Ie.actions,Be=(He.setShowCurrent,He.setCurrentTask,He.setHistoricTask,He.setPreviousTask,He.copyCurrentToPreviousTask,He.setExportingToPDF),Ve=He.setExportToPDFJobId,ze=He.resetExportToPDFCounter,Ke=He.increaseExportToPDFCounter,Je=He.stopPDFExport,qe=(He.setExecutionHistory,He.clearExecutionHistory),Ye=function(e){return e.tasks.currentTask},Ge=function(e){return e.tasks.historicTask},Qe=function(e){return e.tasks.previousTask},Ze=function(e){return e.tasks.exportingToPDF},Xe=function(e){return e.tasks.exportToPDFJobId},$e=function(e){return e.tasks.exportToPDFCounter},et=function(){try{var e,t,a=document.getElementById("main-iframe"),n=null===a||void 0===a||null===(e=a.contentWindow)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.hash;if(n)return n}catch(o){}return""};function tt(e){var t=e.widgetKey,a=e.label,o=e.value,s=e.disabled,r=e.hidden,l=e.runNb,d=e.url_key,u=Object(i.b)(),b=Object(n.useState)(!1),p=Object(R.a)(b,2),j=p[0],h=p[1],v=Object(c.c)(),f=Object(R.a)(v,1)[0];return Object(n.useEffect)((function(){if(void 0!==d&&""!==d){var e,a=null===(e=f.get(d))||void 0===e?void 0:e.toLowerCase();j||void 0===a||"true"!==a&&"false"!==a||(u(ge({key:t,value:"true"===a})),u(Pe(!0)))}}),[u,f,j,d,t]),Object(n.useEffect)((function(){j&&l()}),[o]),Object(E.jsxs)("div",{className:"form-group form-check form-switch mb-3",style:{display:r?"none":""},children:[Object(E.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox-".concat(a),disabled:s,onChange:function(){h(!0),u(Oe({key:t,value:!o}))},checked:null!=o&&o}),Object(E.jsx)("label",{className:"form-check-label",htmlFor:"checkbox-".concat(a),style:{color:s?"#555":"#212529"},children:a})]})}function at(e){var t=e.widgetKey,a=e.label,o=e.value,s=e.min,r=e.max,l=e.step,d=e.disabled,u=e.hidden,b=e.runNb,p=e.continuousUpdate,j=e.url_key,h=Object(i.b)(),v=Object(n.useState)(!1),f=Object(R.a)(v,2),m=f[0],x=f[1],O=Object(n.useState)(!1),g=Object(R.a)(O,2),y=g[0],w=g[1],k=0,N=10,S=1;null!==s&&(k=s),null!==r&&(N=r),null!==l&&(S=l);var P=null!==o&&void 0!==o?o:0,T=Object(c.c)(),_=Object(R.a)(T,1)[0];Object(n.useEffect)((function(){if(void 0!==j&&""!==j){var e=_.get(j);!y&&void 0!==e&&null!==e&&!isNaN(parseFloat(e))&&parseFloat(e)>=k&&parseFloat(e)<=N&&(h(ge({key:t,value:parseFloat(e)})),h(Pe(!0)))}}),[h,N,k,_,y,j,t]);var C=function(){null!==s&&null!==o&&o<s&&h(Oe({key:t,value:s})),null!==r&&null!==o&&o>r&&h(Oe({key:t,value:r}))};return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:u?"none":""},children:[Object(E.jsx)("label",{htmlFor:"checkbox-".concat(a),style:{color:d?"#555":"#212529"},children:a}),Object(E.jsx)("input",{className:"form-control",type:"number",value:P,onChange:function(e){w(!0),x(!0),h(Oe({key:t,value:e.target.value}))},onBlur:function(e){C()},onKeyPress:function(e){"Enter"===e.key&&(C(),b(),x(!1),e.preventDefault())},min:k,max:N,step:S,disabled:d}),m&&p&&Object(E.jsx)("div",{style:{float:"right",position:"relative",top:"0px",left:"0px"},children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){C(),b(),x(!1),e.preventDefault()},style:{fontSize:"0.7em",border:"none"},children:"Press enter or click to apply"})})]})}var nt=a(58);function ot(e){var t=e.widgetKey,a=e.label,o=e.value,s=e.min,r=e.max,l=e.step,d=(e.vertical,e.disabled),u=e.hidden,b=e.runNb,p=e.url_key,j=0,h=100,v=1;s&&(j=s),r&&(h=r),l&&(v=l);var f=Object(i.b)(),m=Object(n.useState)(!1),x=Object(R.a)(m,2),O=x[0],g=x[1],y=Object(c.c)(),w=Object(R.a)(y,1)[0];Object(n.useEffect)((function(){if(void 0!==p&&""!==p){var e,a=null===(e=w.get(p))||void 0===e?void 0:e.split(",").map((function(e){return parseFloat(e)}));!O&&void 0!==a&&2===a.length&&void 0!==a[0]&&!isNaN(a[0])&&void 0!==a[1]&&!isNaN(a[1])&&a[0]<=a[1]&&a[0]>=j&&a[1]<=h&&(f(ge({key:t,value:a})),f(Pe(!0)))}}),[f,h,j,w,O,p,t]);var k=null!=o&&void 0!==o&&2===o.length?o:[j,h];return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:u?"none":""},children:[Object(E.jsx)("label",{htmlFor:"range-slider-".concat(a),style:{color:d?"#555":"#212529"},children:a}),Object(E.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(E.jsx)(nt.Range,{disabled:d,values:k,step:v,min:j,max:h,onChange:function(e){g(!0),f(ye()),f(Oe({key:t,value:e}))},onFinalChange:function(e){b()},renderTrack:function(e){var t=e.props,a=e.children;return Object(E.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(U.a)(Object(U.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(E.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(nt.getTrackBackground)({values:k,colors:["#ccc",d?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:j,max:h}),alignSelf:"center"},children:[a,Object(E.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(E.jsx)("div",{style:{float:"left"},children:j}),Object(E.jsx)("div",{style:{float:"right"},children:h})]})]})})},renderThumb:function(e){var t=e.index,a=e.props,n=e.isDragged;return Object(E.jsxs)("div",Object(U.a)(Object(U.a)({},a),{},{style:Object(U.a)(Object(U.a)({},a.style),{},{height:"18px",width:"18px",border:"None !important",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(E.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:d?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:k[t]}),Object(E.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:n?"#2684ff":"#CCC"}})]}))}})})]})}var st=a(172);function it(e){var t=e.widgetKey,a=e.label,o=e.value,s=e.choices,r=e.multi,l=e.disabled,d=e.hidden,u=e.runNb,b=e.url_key,p=Object(i.b)(),j=Object(n.useState)(!1),h=Object(R.a)(j,2),v=h[0],f=h[1],m={menu:function(e){return Object(U.a)(Object(U.a)({},e),{},{zIndex:100})}},x=Object(c.c)(),O=Object(R.a)(x,1)[0];Object(n.useEffect)((function(){if(void 0!==b&&""!==b){var e=O.get(b);if(!v&&void 0!==e&&null!==e)if(r){var a=e.split(",");a&&(p(ge({key:t,value:a.filter((function(e){return s.includes(e)}))})),p(Pe(!0)))}else s.includes(e)&&(p(ge({key:t,value:e})),p(Pe(!0)))}}),[s,p,r,O,v,b,t]);var g={value:"",label:""},y=[{value:"",label:""}],w=s.map((function(e){return o&&e===o&&!r&&(g={value:e,label:e}),{value:e,label:e}}));return r&&(y=[],s.map((function(e){return o&&o.includes(e)&&r&&y.push({value:e,label:e}),{value:e,label:e}}))),Object(n.useEffect)((function(){v&&u()}),[o]),Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:d?"none":""},children:[Object(E.jsx)("label",{htmlFor:"select-".concat(a),style:{color:l?"#555":"#212529"},children:a}),Object(E.jsx)(st.a,{id:"select-".concat(a),isDisabled:l,name:a||"Select",styles:m,value:r?y:g,options:w,isMulti:r,onChange:function(e){if(e)if(f(!0),function(e){return void 0!==e.value}(e))p(Oe({key:t,value:e.value}));else{var a=Array.from(e.values()).filter((function(e){return void 0!==e}));p(Oe({key:t,value:a.map((function(e){return e.value}))}))}}})]})}function rt(e){var t=e.widgetKey,a=e.label,o=e.value,s=e.min,r=e.max,l=e.step,d=(e.vertical,e.disabled),u=e.hidden,b=e.runNb,p=e.url_key,j=Object(i.b)(),h=Object(n.useState)(!1),v=Object(R.a)(h,2),f=v[0],m=v[1],x=0,O=100,g=1;s&&(x=s),r&&(O=r),l&&(g=l);var y=Object(c.c)(),w=Object(R.a)(y,1)[0];Object(n.useEffect)((function(){if(void 0!==p&&""!==p){var e=w.get(p);!f&&void 0!==e&&null!==e&&!isNaN(parseFloat(e))&&parseFloat(e)>=x&&parseFloat(e)<=O&&(j(ge({key:t,value:parseFloat(e)})),j(Pe(!0)))}}),[j,O,x,w,f,p,t]);var k=[null!==o?o:O];return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:u?"none":""},children:[Object(E.jsx)("label",{htmlFor:"slider-".concat(a),style:{color:d?"#555":"#212529"},children:a}),Object(E.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(E.jsx)(nt.Range,{disabled:d,values:k,step:g,min:x,max:O,onChange:function(e){m(!0),j(Oe({key:t,value:e[0]}))},onFinalChange:function(e){b()},renderTrack:function(e){var t=e.props,a=e.children;return Object(E.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(U.a)(Object(U.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(E.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(nt.getTrackBackground)({values:k,colors:[d?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:x,max:O}),alignSelf:"center"},children:[a,Object(E.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(E.jsx)("div",{style:{float:"left"},children:x}),Object(E.jsx)("div",{style:{float:"right"},children:O})]})]})})},renderThumb:function(e){var t=e.props,a=e.isDragged;return Object(E.jsxs)("div",Object(U.a)(Object(U.a)({},t),{},{style:Object(U.a)(Object(U.a)({},t.style),{},{height:"18px",width:"18px",border:"None",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(E.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:d?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:k[0]}),Object(E.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:a?"#2684ff":"#CCC"}})]}))}})})]})}var ct,lt=a(102),dt=a(127),ut=a.n(dt),bt=a(128),pt=a.n(bt),jt=a(129),ht=a.n(jt);!function(e){e.Unknown="Unknown",e.Loaded="Loaded",e.NotFound="Not found",e.AccessForbidden="Access forbidden",e.NetworkError="Network Error",e.PleaseRefresh="Please refresh",e.LostConnection="Lost connection",e.NotReady="Not Ready"}(ct||(ct={}));var vt={site:{},siteStatus:ct.Unknown},ft=Object(b.b)({name:"sites",initialState:vt,reducers:{setSite:function(e,t){e.site=t.payload},setSiteStatus:function(e,t){e.siteStatus=t.payload}}}),mt=ft.reducer,xt=ft.actions,Ot=xt.setSite,gt=xt.setSiteStatus,yt=function(e){return e.sites.siteStatus},wt=function(e){return e.sites.site.id},kt=function(e){return e.sites.site.welcome},Nt=function(e){return"PUBLIC"===e.sites.site.share},St=function(){return function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n,o,i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Ot({})),t(gt(ct.Unknown)),a="single-site",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_URL&&(a=window.location.host.split(":")[0]),window.location.origin.endsWith("hf.space")&&(a="localhost"),n="/api/v1/get-site/".concat(a,"/"),e.next=9,s.a.get(n);case 9:o=e.sent,i=o.data,t(Ot(i)),"Ready"!==(null===i||void 0===i?void 0:i.status)?t(gt(ct.NotReady)):t(gt(ct.Loaded)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),r=e.t0,console.log(r.message),"Network Error"===(null===r||void 0===r?void 0:r.message)?t(gt(ct.NetworkError)):403===r.response.status?t(gt(ct.AccessForbidden)):404===r.response.status?t(gt(ct.NotFound)):401===r.response.status?(t(N("")),t(S("")),t(gt(ct.PleaseRefresh))):console.error("Problem during loading site information. ".concat(e.t0));case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()};function Pt(e){var t=e.widgetKey,a=e.label,o=e.maxFileSize,r=e.disabled,c=e.hidden,l=e.value,b=e.runNb,j=Object(i.b)(),h=Object(n.useState)(!1),v=Object(R.a)(h,2),m=v[0],x=v[1],O=Object(i.c)(Q),g=Object(i.c)(wt),y=Object(i.c)(f),w="100MB";o&&(w=o),Object(n.useEffect)((function(){m&&void 0!==l&&2===l.length&&b()}),[l]),Object(n.useEffect)((function(){j(function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,s.a.get("/api/v1/storage-type");case 4:a=e.sent,n=a.data,t(K(n.storage_type)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Get storage type error. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[j]),console.log(O);var k={url:"".concat(s.a.defaults.baseURL,"/api/v1/fp"),process:"/process/",revert:function(){var e=Object(u.a)(d.a.mark((function e(a,n,o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.delete("".concat(s.a.defaults.baseURL,"/api/v1/fp/revert"),{data:a});case 3:j(Oe({key:t,value:[]})),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o("Problem with uploaded file removal");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},N={process:function(e,t,a,n,o,i,r){var c=new AbortController;return s.a.get("/api/v1/nb-file-put/".concat(g,"/").concat(y,"/").concat(t.name,"/").concat(t.size)).then((function(e){var a=e.data.url,o=s.a.defaults.headers.common.Authorization;delete s.a.defaults.headers.common.Authorization;var r={onUploadProgress:function(e){i(void 0!==e.total,e.loaded,e.total)}};s.a.put(a,t,{headers:{"Content-Type":""},onUploadProgress:r.onUploadProgress,signal:c.signal}).then((function(e){n(t.name),void 0!==g&&j(function(e,t,a){return function(){var n=Object(u.a)(d.a.mark((function n(o){var i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i={site_id:e,session_id:t,filename:a},n.next=5,s.a.post("/api/v1/nb-file-uploaded",i);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Problem with file upload. ".concat(n.t0));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(g,y,t.name))})).catch((function(e){p.b.error("Error when uploading new files")})),s.a.defaults.headers.common.Authorization=o})).catch((function(e){p.b.error("Cant upload new files")})),{abort:function(){c.abort(),r()}}},revert:function(){var e=Object(u.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{void 0!==g&&j(Z(g,y,t)),a()}catch(o){n("Problem with uploaded file removal")}case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()};return Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:c?"none":""},children:[Object(E.jsx)("label",{htmlFor:"file-".concat(a),style:{color:r?"#555":"#212529"},children:a}),Object(E.jsx)("div",{children:Object(E.jsx)(lt.FilePond,{disabled:r,maxFileSize:w,onprocessfile:function(e,a){x(!0),j(Oe({key:t,value:[a.filename,a.serverId]}))},server:"media"===O?k:N,labelIdle:'Drag & Drop your file or <span class="filepond--label-action">Browse</span>'})})]})}function Tt(e){var t=e.widgetKey,a=e.label,o=e.value,s=e.rows,r=e.disabled,l=e.hidden,d=e.runNb,u=e.continuousUpdate,b=e.url_key,p=Object(i.b)(),j=Object(n.useState)(!1),h=Object(R.a)(j,2),v=h[0],f=h[1],m=Object(n.useState)(!1),x=Object(R.a)(m,2),O=x[0],g=x[1],y=s||1,w=function(e){return e.replace(/["'(){}[\]`^]/gim,"")},k=Object(c.c)(),N=Object(R.a)(k,1)[0];return Object(n.useEffect)((function(){if(void 0!==b&&""!==b){var e=N.get(b);O||void 0===e||null===e||(p(ge({key:t,value:e})),p(Pe(!0)))}}),[p,N,O,b,t]),Object(E.jsxs)("div",{className:"form-group mb-3",style:{display:l?"none":""},children:[Object(E.jsx)("label",{htmlFor:"textarea-".concat(a),style:{color:r?"#555":"#212529"},children:a}),1===y&&Object(E.jsx)("input",{className:"form-control",type:"text",id:"text-".concat(a),value:o||"",onChange:function(e){g(!0),f(!0),p(Oe({key:t,value:w(e.target.value)}))},onKeyPress:function(e){"Enter"===e.key&&(d(),f(!1),e.preventDefault())},disabled:r}),y>1&&Object(E.jsx)("textarea",{className:"form-control",id:"text-area-".concat(a),rows:y,value:o||"",onChange:function(e){g(!0),f(!0),p(Oe({key:t,value:w(e.target.value)}))},disabled:r}),v&&u&&1===y&&Object(E.jsx)("div",{style:{float:"right",position:"relative",top:"2px",left:"0px"},children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){d(),f(!1),e.preventDefault()},style:{fontSize:"0.7em",border:"none"},children:"Press enter or click to apply"})}),v&&u&&y>1&&Object(E.jsx)("div",{style:{float:"right",position:"relative",top:"2px",left:"0px"},children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:function(e){d(),f(!1),e.preventDefault()},style:{fontSize:"0.7em",border:"none"},children:"Apply"})})]})}Object(lt.registerPlugin)(ut.a,pt.a,ht.a);var _t,Ct,Rt=a(312),Et=a(314),At=a(87),Lt=a(90),Dt=a(88);function Ut(e){var t=e.value,a=e.disabled;return Object(E.jsx)("div",{className:"form-group mb-3",style:{color:a?"#555":"#212529"},children:Object(E.jsx)(Rt.a,{rehypePlugins:[At.a,Et.a,Lt.a,Dt.a],children:t})})}!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Unknown="Unknown",e.Disconnected="Disconnected"}(_t||(_t={})),function(e){e.Unknown="Unknown",e.Starting="Starting",e.Running="Running",e.Missing="Missing",e.Busy="Busy",e.Queued="Queued",e.MaxRunTimeReached="MaxRunTimeReached",e.MaxIdleTimeReached="MaxIdleTimeReached",e.UsageLimitReached="UsageLimitReached"}(Ct||(Ct={}));var Ft={webSocketState:_t.Unknown,workerState:Ct.Unknown,workerId:void 0,notebookSrc:"",tryConnectCount:0},Wt=Object(b.b)({name:"ws",initialState:Ft,reducers:{setWebSocketState:function(e,t){e.webSocketState=t.payload},setWorkerState:function(e,t){e.workerState=t.payload},setWorkerId:function(e,t){e.workerId=t.payload},setNotebookSrc:function(e,t){e.notebookSrc=t.payload},increaseTryConnectCount:function(e){e.tryConnectCount+=1},resetTryConnectCount:function(e){e.tryConnectCount=0}}}),It=Wt.reducer,Mt=Wt.actions,Ht=Mt.setWebSocketState,Bt=Mt.setWorkerState,Vt=Mt.setWorkerId,zt=Mt.setNotebookSrc,Kt=Mt.increaseTryConnectCount,Jt=Mt.resetTryConnectCount,qt=function(e){return e.ws.webSocketState},Yt=function(e){return e.ws.workerState},Gt=function(e){return e.ws.workerId},Qt=function(e){return e.ws.notebookSrc},Zt=function(e){return e.ws.tryConnectCount},Xt=function(e){return{purpose:"run-notebook",widgets:e}},$t=Object(n.createContext)(void 0),ea="ws://127.0.0.1:8000",ta=!0;Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_WS?(ea=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_WS,ta=!1):"http://localhost:3000"===window.location.origin?(ea="ws://127.0.0.1:8000",ta=!0):(ea=window.location.origin.replace("http://","ws://").replace("https://","wss://"),ta=!1),window.location.origin.endsWith("hf.space")&&(ea=window.location.origin.replace("http://","ws://").replace("https://","wss://"),ta=!1);var aa=0,na=void 0;function oa(e){var t=e.children;console.log("WebSocketProvider");var a=Object(i.b)(),o=Object(i.c)(wt),r=Object(i.c)(Re),c=Object(i.c)(T),l=Object(i.c)(Ee),b=void 0,p="Unknown";Object(n.useEffect)((function(){return aa=0,function(){var e;aa=6,null===(e=na)||void 0===e||e.close()}}),[]);var j=function(e){void 0!==b&&b.readyState===b.OPEN&&b.send(e)};function h(e){a(Jt()),j(JSON.stringify({purpose:"server-address",address:ea})),a(Ht(_t.Connected)),g()}function v(e){var t,n=JSON.parse(e.data);"purpose"in n&&("worker-state"===n.purpose?(console.log("worker-state",n.state),p=n.state,a(Bt(n.state)),a(Vt(n.workerId)),(p===Ct.MaxIdleTimeReached||p===Ct.MaxRunTimeReached)&&(null===(t=b)||void 0===t||t.close())):"executed-notebook"===n.purpose?((null===n||void 0===n?void 0:n.reloadNotebook)&&void 0!==r&&a(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var n=Object(u.a)(d.a.mark((function n(o){var i,r,c,l,u,b;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a||(o(fe("")),o(qe())),i=ce(),r=i.width,o(z(r>992)),a||o(ve("loading")),c="/api/v1/".concat(e,"/notebooks/").concat(t,"/"),n.next=8,s.a.get(c);case 8:l=n.sent,u=l.data,b=JSON.parse(u.params),o(he(Object(U.a)(Object(U.a)({},u),{},{params:b}))),a||o(ve("loaded")),null!==(null===b||void 0===b?void 0:b.show_sidebar)&&void 0!==(null===b||void 0===b?void 0:b.show_sidebar)&&o(z(null===b||void 0===b?void 0:b.show_sidebar)),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),a||o(ve("error")),console.error("Problem during loading selected notebook (".concat(t,"). ").concat(n.t0));case 20:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e){return n.apply(this,arguments)}}()}(o,r)),a(zt(n.body))):"update-widgets"===n.purpose?a(me(n)):"hide-widgets"===n.purpose?a(xe(n)):"init-widgets"===n.purpose?(a(we(n)),a(Se(!0))):"update-title"===n.purpose?a(ke(n.title)):"update-show-code"===n.purpose?a(Ne(n.showCode)):"download-html"!==n.purpose&&"download-pdf"!==n.purpose||n.url&&n.filename&&(a(Be(!1)),x(n.url,n.filename)))}function m(e){a(Ht(_t.Disconnected)),a(Bt(Ct.Unknown))}function O(e){a(Ht(_t.Disconnected)),b=void 0,p!==Ct.MaxIdleTimeReached&&p!==Ct.MaxRunTimeReached&&(a(Bt(Ct.Unknown)),a(Vt(void 0)),aa<5&&setTimeout((function(){return y()}),5e3))}function g(){j(JSON.stringify({purpose:"worker-ping"})),void 0!==b&&b.readyState===b.OPEN&&setTimeout((function(){return g()}),1e4)}function y(){if((ta||!l)&&void 0!==r&&void 0===b&&p!==Ct.MaxIdleTimeReached&&p!==Ct.MaxRunTimeReached&&aa<5){console.log("WS connect ..."+p+" "+aa),a(Kt());var e="".concat(ea,"/ws/client/").concat(r,"/").concat(f(),"/");void 0!==c&&null!==c&&""!==c&&(e+="?token=".concat(c)),(b=new WebSocket(e)).onopen=h,b.onmessage=v,b.onerror=m,b.onclose=O,na=b,(aa+=1)>=5&&a(gt(ct.NetworkError))}}y();var w={sendMessage:j};return Object(E.jsx)($t.Provider,{value:w,children:t})}function sa(e){var t=e.allowDownload,a=e.waiting,o=(e.continuousUpdate,e.staticNotebook),r=e.notebookId,c=e.notebookPath,l=e.notebookTitle,b=e.runDownloadHTML,j=e.runDownloadPDF,h=e.widgetsValues,v=e.widgetsParams,m=Object(i.b)(),O=Object(n.useState)(!1),g=Object(R.a)(O,2),y=g[0],w=g[1],k=Object(i.c)(qt),N=Object(i.c)(Yt),S=Object(i.c)(Zt);Object(n.useEffect)((function(){S>=5&&m(gt(ct.LostConnection))}),[m,S]);var P="orange";k===_t.Connected?P="green":k!==_t.Disconnected&&k!==_t.Unknown||(P="red");var T="orange";N===Ct.Running||N===Ct.Busy?T="green":N!==Ct.Missing&&N!==Ct.Unknown||(T="red");var _=!0,C="?";if(void 0!==v&&null!==v&&void 0!==h&&null!==h){for(var A=0,L=Object.entries(v);A<L.length;A++){var D=Object(R.a)(L[A],2),U=D[0],F=D[1];if(void 0!==h[U]){if(($(F)||ee(F)||ae(F)||X(F)||te(F)||oe(F))&&null!==(null===F||void 0===F?void 0:F.url_key)&&""!==(null===F||void 0===F?void 0:F.url_key)&&(_=!1),($(F)||ee(F)||te(F)||oe(F))&&null!==(null===F||void 0===F?void 0:F.url_key)&&""!==(null===F||void 0===F?void 0:F.url_key)&&(C+="".concat(null===F||void 0===F?void 0:F.url_key,"=").concat(h[U],"&")),ae(F)&&null!==(null===F||void 0===F?void 0:F.url_key)&&""!==(null===F||void 0===F?void 0:F.url_key)){var W=h[U];C+="".concat(null===F||void 0===F?void 0:F.url_key,"=").concat(W[0],",").concat(W[1],"&")}if(X(F)&&null!==(null===F||void 0===F?void 0:F.url_key)&&""!==(null===F||void 0===F?void 0:F.url_key))if(null===F||void 0===F?void 0:F.multi){var I=h[U];C+="".concat(null===F||void 0===F?void 0:F.url_key,"=").concat(I.join(","),"&")}else{var M=h[U];C+="".concat(null===F||void 0===F?void 0:F.url_key,"=").concat(M,"&")}}}"?"!==C&&(C=C.slice(0,C.length-1))}return Object(E.jsxs)("div",{style:{paddingBottom:"25px"},children:[void 0!==r&&!o&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("span",{title:"WebSocket: ".concat(k),children:Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:P,className:"bi bi-wifi",viewBox:"0 0 16 16",children:[Object(E.jsx)("path",{d:"M15.384 6.115a.485.485 0 0 0-.047-.736A12.444 12.444 0 0 0 8 3C5.259 3 2.723 3.882.663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.716 2.164.205.148.49.13.668-.049z"}),Object(E.jsx)("path",{d:"M13.229 8.271a.482.482 0 0 0-.063-.745A9.455 9.455 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.576 1.336c.206.132.48.108.653-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.473 6.473 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.407.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.61-.091l.016-.015zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .707 0l.707-.707z"})]})})," ",Object(E.jsx)("span",{title:"Worker: ".concat(N,"\nSession Id: ").concat(f()),children:Object(E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:T,className:"bi bi-cpu",viewBox:"0 0 16 16",children:Object(E.jsx)("path",{d:"M5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2A2.5 2.5 0 0 1 14 4.5h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14a2.5 2.5 0 0 1-2.5 2.5v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14A2.5 2.5 0 0 1 2 11.5H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2A2.5 2.5 0 0 1 4.5 2V.5A.5.5 0 0 1 5 0zm-.5 3A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 11.5 3h-7zM5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3zM6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"})})})]}),N===Ct.Busy&&Object(E.jsxs)("span",{title:"Worker is busy",children:[" ",Object(E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"green",className:"bi bi-activity",viewBox:"0 0 16 16",children:Object(E.jsx)("path",{fillRule:"evenodd",d:"M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"})})]}),Object(E.jsxs)("div",{style:{float:"right"},children:[t&&Object(E.jsxs)("div",{className:"dropdown mx-2 btn-group",style:{display:"inline"},children:[Object(E.jsxs)("button",{className:"btn btn-sm btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",disabled:a,children:[Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{paddingBottom:"1px"},children:[Object(E.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(E.jsx)("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),Object(E.jsx)("path",{d:"M7 11l5 5l5 -5"}),Object(E.jsx)("path",{d:"M12 4l0 12"})]})," ","Download"]}),Object(E.jsxs)("ul",{className:"dropdown-menu my-2",children:[Object(E.jsx)("li",{children:Object(E.jsxs)("button",{type:"button",style:{cursor:"pointer"},className:"dropdown-item",onClick:function(){o?x("".concat(s.a.defaults.baseURL).concat(c),"".concat(l,".html")):b()},children:[Object(E.jsx)("i",{className:"fa fa-file-code-o","aria-hidden":"true"})," ","Download as HTML"]})}),Object(E.jsx)("li",{children:Object(E.jsx)("hr",{className:"dropdown-divider"})}),Object(E.jsx)("li",{children:Object(E.jsxs)("button",{type:"button",className:"dropdown-item",onClick:function(){o?m(function(e,t){return function(){var a=Object(u.a)(d.a.mark((function a(n){var o,i,r,c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(Be(!0)),n(ze()),n(Ve("")),o=f(),i={session_id:o,notebook_id:e,notebook_path:t},a.next=9,s.a.post("/api/v1/export_pdf/",i);case 9:r=a.sent,c=r.data,n(Ve(c.job_id)),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),p.b.error("The error occured during PDF export. ".concat(a.t0)),n(Je());case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}(r,c)):(m(Be(!0)),j())},children:[Object(E.jsx)("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"})," ","Download as PDF"]})})]})]}),Object(E.jsxs)("button",{className:"btn btn-sm btn-primary",onClick:function(){return w(!y)},disabled:a,children:[Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(E.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(E.jsx)("path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M8.7 10.7l6.6 -3.4"}),Object(E.jsx)("path",{d:"M8.7 13.3l6.6 3.4"})]})," ","Share"]})]}),Object(E.jsx)("div",{className:"",style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",display:y?"block":"none"},children:Object(E.jsx)("section",{className:"",style:{position:"fixed",width:"100%",height:"auto",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:Object(E.jsx)("div",{className:"modal-dialog",children:Object(E.jsxs)("div",{className:"modal-content",children:[Object(E.jsxs)("div",{className:"modal-header",children:[Object(E.jsxs)("h3",{className:"modal-title",children:[Object(E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(E.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(E.jsx)("path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),Object(E.jsx)("path",{d:"M8.7 10.7l6.6 -3.4"}),Object(E.jsx)("path",{d:"M8.7 13.3l6.6 3.4"})]})," ","Share"]}),Object(E.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){return w(!1)}})]}),Object(E.jsxs)("div",{className:"modal-body",children:[Object(E.jsxs)("div",{className:"py-2",children:[Object(E.jsx)("label",{children:"App address"}),Object(E.jsx)("input",{type:"text",className:"form-control",disabled:!0,value:window.location.href})]}),!_&&Object(E.jsxs)("div",{className:"py-2",children:[Object(E.jsx)("label",{children:"App address with current paramters"}),Object(E.jsx)("textarea",{rows:5,className:"form-control",disabled:!0,value:window.location.href+C})]}),_&&Object(E.jsxs)("div",{className:"py-2",children:["There are no ",Object(E.jsx)("code",{children:"url_key"})," defined for any widget. You can easily share URL to your notebook with preset values by using ",Object(E.jsx)("code",{children:"url_key"})," in the widget. Please check"," ",Object(E.jsx)("a",{href:"https://runmercury.com/docs/input-widgets/",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]}),Object(E.jsx)("div",{className:"py-2"})]}),Object(E.jsx)("div",{className:"modal-footer",children:Object(E.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return w(!1)},children:"Close"})})]})})})})]})}function ia(e){var t=e.widgetKey,a=e.label,o=e.style,s=e.value,r=e.disabled,c=e.hidden,l=e.runNb,d=Object(i.b)(),u="btn-primary";return"success"===o?u="btn-success":"danger"===o?u="btn-danger":"info"===o?u="btn-info":"warning"===o&&(u="btn-warning"),Object(n.useEffect)((function(){s&&l()}),[s]),Object(E.jsx)("div",{className:"form-group mb-3",style:{display:c?"none":""},children:Object(E.jsx)("button",{type:"button",className:"btn ".concat(u),style:{marginRight:"10px",width:"47%"},onClick:function(){d(Oe({key:t,value:!0}))},disabled:r,children:a})})}function ra(e){var t=e.runNb,a=e.waiting,n=e.workerState;return Object(E.jsxs)("button",{type:"button",className:"btn btn-success",style:{marginRight:"10px",width:"100%"},onClick:function(){t()},disabled:a||n!==Ct.Running,children:[n===Ct.Running&&Object(E.jsxs)("span",{children:[Object(E.jsx)("i",{className:"fa fa-play","aria-hidden":"true"})," Run"]}),n===Ct.Busy&&Object(E.jsxs)("span",{children:[Object(E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",className:"bi bi-activity",viewBox:"0 0 16 16",children:Object(E.jsx)("path",{fillRule:"evenodd",d:"M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"})})," ","Busy"]}),n!==Ct.Busy&&n!==Ct.Running&&Object(E.jsx)("span",{children:"Waiting ..."})]})}var ca=a(49);function la(e){var t=e.notebookTitle,a=e.notebookId,o=(e.notebookSchedule,e.taskCreatedAt,e.loadingState,e.waiting),s=e.widgetsParams,r=e.watchMode,c=e.notebookPath,l=e.displayEmbed,d=e.showFiles,u=e.isPresentation,b=(e.notebookParseErrors,e.continuousUpdate),p=e.staticNotebook,j=e.allowDownload,h=Object(i.b)(),v=Object(i.c)(De),f=Object(i.c)(Ue),m=Object(i.c)(Yt),x=Object(i.c)(Fe),O=Object(i.c)(We),g=Object(n.useContext)($t),y=function(){b&&w()},w=function(){var e=et();if(h(fe(e)),f){for(var t={},a=0,n=Object.entries(s);a<n.length;a++){var o=Object(R.a)(n[a],2),i=o[0];o[1];i in f?(t[i]=f[i],h(Oe({key:i,value:t[i]}))):i in v&&(t[i]=v[i])}g.sendMessage(JSON.stringify(Xt(JSON.stringify(t)))),h(ye())}else g.sendMessage(JSON.stringify(Xt(JSON.stringify(v))))};Object(n.useEffect)((function(){x&&O&&(w(),h(Pe(!1)),h(Se(!1)))}),[x,O]);Object(n.useEffect)((function(){if(s)for(var e=0,t=Object.entries(s);e<t.length;e++){var a=Object(R.a)(t[e],2),n=a[0],o=a[1];n in v||("file"===o.input?h(Oe({key:n,value:[]})):"text"===o.input?h(Oe({key:n,value:o.value?o.value:""})):ie(o)||(se(o)?h(Oe({key:n,value:"output-dir"})):h(Oe({key:n,value:o.value}))))}}),[h,s,v]);var k=[],N=[];if(s&&!p){for(var S=[],P=0,T=Object.keys(s);P<T.length;P++){var _=T[P],C=_.split(".");S.push([_,parseFloat("".concat(C[1],".").concat(C[2]))])}S.sort((function(e,t){return e[1]-t[1]}));for(var A=0,L=S;A<L.length;A++){var D=L[A][0],F=s[D];X(F)?k.push(Object(E.jsx)(it,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,value:v[D],choices:null===F||void 0===F?void 0:F.choices,multi:null===F||void 0===F?void 0:F.multi,runNb:y,url_key:null===F||void 0===F?void 0:F.url_key},D)):$(F)?k.push(Object(E.jsx)(tt,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,value:v[D],runNb:y,url_key:null===F||void 0===F?void 0:F.url_key},D)):ee(F)?k.push(Object(E.jsx)(at,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,value:v[D],min:null===F||void 0===F?void 0:F.min,max:null===F||void 0===F?void 0:F.max,step:null===F||void 0===F?void 0:F.step,runNb:y,continuousUpdate:b,url_key:null===F||void 0===F?void 0:F.url_key},D)):te(F)?k.push(Object(E.jsx)(rt,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,value:v[D],min:null===F||void 0===F?void 0:F.min,max:null===F||void 0===F?void 0:F.max,step:null===F||void 0===F?void 0:F.step,vertical:null===F||void 0===F?void 0:F.vertical,runNb:y,url_key:null===F||void 0===F?void 0:F.url_key},D)):ae(F)?k.push(Object(E.jsx)(ot,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,value:v[D],min:null===F||void 0===F?void 0:F.min,max:null===F||void 0===F?void 0:F.max,step:null===F||void 0===F?void 0:F.step,vertical:null===F||void 0===F?void 0:F.vertical,runNb:y,url_key:F.url_key},D)):ne(F)?(k.push(Object(E.jsx)(Pt,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,maxFileSize:null===F||void 0===F?void 0:F.maxFileSize,value:v[D],runNb:y},D)),N.push(D)):oe(F)?k.push(Object(E.jsx)(Tt,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,value:v[D],rows:null===F||void 0===F?void 0:F.rows,runNb:y,continuousUpdate:b,url_key:null===F||void 0===F?void 0:F.url_key},D)):ie(F)?k.push(Object(E.jsx)(Ut,{value:F.value,disabled:o},D)):re(F)?k.push(Object(E.jsx)(ia,{widgetKey:D,disabled:o||(null===F||void 0===F?void 0:F.disabled),hidden:null===F||void 0===F?void 0:F.hidden,label:null===F||void 0===F?void 0:F.label,value:v[D],style:null===F||void 0===F?void 0:F.style,runNb:y},D)):se(F)||console.log("Unknown widget type",F)}}var W={};l&&(W={padding:"0px"});var I=void 0===t||null===t||""===t;return Object(E.jsx)("nav",{id:"sidebarMenu",className:"col-lg-3 d-md-block bg-light sidebar",style:Object(U.a)(Object(U.a)({},W),{},{overflowY:"auto"}),children:Object(E.jsx)(ca.a,{blocking:!1,message:"",children:Object(E.jsxs)("div",{className:"position-sticky p-3",children:[Object(E.jsxs)("h4",{children:[t,Object(E.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{float:"right",zIndex:"101"},onClick:function(){return h(z(!1))},"data-toggle":"tooltip","data-placement":"right",title:"Hide sidebar",children:Object(E.jsx)("i",{className:"fa fa-chevron-left","aria-hidden":"true"})})]}),Object(E.jsx)("div",{style:{padding:"0px"},children:Object(E.jsxs)("form",{children:[k,I&&Object(E.jsx)("div",{style:{padding:"15px"}}),Object(E.jsx)("div",{className:"form-group mb-3 pb-1 pt-2",children:!b&&Object(E.jsx)(ra,{runNb:w,waiting:o,workerState:m})}),m===Ct.UsageLimitReached&&Object(E.jsxs)("div",{className:"alert alert-info mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," Usage limit was reached. Please upgrade the plan."]}),m===Ct.MaxIdleTimeReached&&Object(E.jsxs)("div",{className:"alert alert-info mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," Your worker was idle for too long, that's why we have stopped it. Do you need a worker?",Object(E.jsx)("br",{}),Object(E.jsx)("button",{className:"btn btn-sm btn-primary my-2",onClick:function(){return window.location.reload()},children:"Restart worker"})]}),m===Ct.MaxRunTimeReached&&Object(E.jsxs)("div",{className:"alert alert-info mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," Your worker was running for too long, that's why we have stopped it. Do you need a worker?",Object(E.jsx)("br",{}),Object(E.jsx)("button",{className:"btn btn-sm btn-primary my-2",onClick:function(){return window.location.reload()},children:"Restart worker"})]}),o&&(m===Ct.Unknown||m===Ct.Queued)&&Object(E.jsxs)("div",{className:"alert alert-warning mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Waiting for worker ..."]}),o&&m===Ct.Starting&&Object(E.jsxs)("div",{className:"alert alert-success mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Initializing worker ..."]}),r&&Object(E.jsxs)("div",{className:"alert alert-secondary mb-3 mt-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-refresh","aria-hidden":"true"})," Notebook in watch mode. All changes to Notebook will be automatically visible in Mercury."]}),u&&Object(E.jsxs)("div",{className:"alert alert-primary mb-3",role:"alert",children:[Object(E.jsx)("i",{className:"fa fa-television","aria-hidden":"true"})," Click on presentation and press ",Object(E.jsx)("b",{children:"F"})," for full screen. Press"," ",Object(E.jsx)("b",{children:"Esc"})," to quit.",Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("i",{className:"fa fa-arrows","aria-hidden":"true"})," Click on presentation and press ",Object(E.jsx)("b",{children:"Esc"})," to navigate slides."]})]})}),d&&Object(E.jsxs)("div",{children:[Object(E.jsx)("hr",{}),Object(E.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",style:{border:"none"},onClick:function(){h(H("app"))},children:[Object(E.jsx)("i",{className:"fa fa-laptop","aria-hidden":"true"})," App"]}),Object(E.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",style:{border:"none"},onClick:function(){h(H("files"))},children:[Object(E.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," ","Output Files"]})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("hr",{}),Object(E.jsxs)("div",{style:{paddingLeft:"10px"},children:[Object(E.jsx)(sa,{notebookId:a,notebookPath:c,notebookTitle:t,staticNotebook:p,allowDownload:j,waiting:o,continuousUpdate:b,runDownloadHTML:function(){p||g.sendMessage(JSON.stringify({purpose:"download-html"}))},runDownloadPDF:function(){p||g.sendMessage(JSON.stringify({purpose:"download-pdf"}))},widgetsValues:v,widgetsParams:s})," "]})]})]})})})}var da=a(170);function ua(e){var t=e.appView,a=e.loadingState,o=e.notebookPath,r=e.waiting,c=e.errorMsg,l=e.watchMode,d=e.displayEmbed,u=e.username,b=e.slidesHash,p=e.columnsWidth,j=e.isPresentation,h=e.fullScreen,v=function(){var e=Object(n.useState)(ce()),t=Object(R.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){function e(){o(ce())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().height,f=d?v-10:v-58,m=Object(i.b)(),x=Object(i.c)(Ce),O=Object(i.c)(Qt),g=!1;if(void 0!==x&&void 0!==x.params&&void 0!==x.params["show-code"]&&null!==x.params["show-code"]&&(g=x.params["show-code"]),""!==O&&!j&&(O="<script>init_mathjax();<\/script>"+O,!g)){O='<style type="text/css">\n      .jp-mod-noOutputs {\n          padding: 0px; \n      }\n      .jp-mod-noInput {\n        padding-top: 0px;\n        padding-bottom: 0px;\n      }\n      </style>'+O}if(""!==O&&j&&""!==b&&-1===O.indexOf("Reveal.slide(")){var y=b.split("/"),w="";4===y.length?w="Reveal.slide(".concat(y[1],", ").concat(y[2],", ").concat(y[3],");"):3===y.length?w="Reveal.slide(".concat(y[1],", ").concat(y[2],");"):2===y.length&&(w="Reveal.slide(".concat(y[1],");")),""!==w&&(O=O.replace("setScrollingSlide);","setScrollingSlide); Reveal.on( 'ready', event => { try{ Reveal.configure({transition: \"none\"}); ".concat(w,' Reveal.configure({transition: "slide"}); } catch(error) {} } );')))}Object(n.useEffect)((function(){if(void 0!==o&&""===O){var e=o;"http://localhost:3000"===window.location.origin&&e.startsWith("/media")&&(e="http://127.0.0.1:8000"+e),window.location.origin.startsWith("https")&&(e=e.replace("http://","https://")),s.a.get("".concat(e).concat(b)).then((function(e){var t=e.data;j||(t=(t=(t=(t=(t=(t=t.replace(/<head>[\s\S]*?<\/head>/,"")).replace("<html>","")).replace("</html>","")).replace("<body","<div")).replace("</body>","</div>")).replace("<!DOCTYPE html>","")),m(zt(t))}))}}),[m,o,b,j,O]);var k={paddingTop:"0px",paddingRight:"0px",paddingLeft:h?"12px":"0px",display:"files"===t?"none":"block"},N={};h||(N={maxWidth:"1140px",margin:"auto"});var S=!1;return p<12&&window.innerWidth<992&&(S=!0),Object(E.jsx)("main",{className:"ms-sm-auto col-".concat(p),style:k,children:Object(E.jsx)(ca.a,{tag:"div",blocking:!S&&r,children:Object(E.jsxs)("div",{style:N,children:["loading"===a&&!l&&Object(E.jsx)("p",{children:"Loading notebook. Please wait ..."}),"error"===a&&Object(E.jsx)("p",{style:{margin:"20px"},children:"Problem while loading notebook. Please try again later or contact Mercury administrator."}),"error"===a&&""===u&&Object(E.jsxs)("p",{style:{margin:"20px"},children:[Object(E.jsx)("h5",{children:"Please log in to see the notebook"}),Object(E.jsxs)("a",{href:"/login",className:"btn btn-primary btn-sm ",children:[Object(E.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]}),c&&Object(E.jsxs)("div",{className:"alert alert-danger mb-3",role:"alert",children:[Object(E.jsx)("b",{children:"Notebook is executed with errors."}),Object(E.jsx)("p",{children:c})]}),""===c&&"loading"!==a&&j&&""!==O&&Object(E.jsx)("iframe",{width:"100%",height:f,srcDoc:O,title:"display",id:"main-iframe",onError:function(){console.log("iframe error")}},o),""!==O&&!j&&Object(E.jsx)(da.a,{html:O})]})})})}function ba(e){var t=e.files,a=e.filesState,n=e.waiting,o=Object(i.b)();console.log(t);var r,c=[],l=Object(F.a)(t);try{var d=function(){var e,t=r.value,a=t.split("/").pop();if(a=null===(e=a)||void 0===e?void 0:e.split("?")[0],t&&a){var n="".concat(s.a.defaults.baseURL).concat(t);t.includes("s3.amazonaws.com")&&(n=t),c.push(Object(E.jsxs)("div",{children:[Object(E.jsx)("i",{className:"fa fa-file-text-o","aria-hidden":"true",style:{paddingRight:"5px"}})," ",Object(E.jsx)("b",{children:a}),Object(E.jsxs)("button",{style:{float:"right"},type:"button",className:"btn btn-primary",onClick:function(){return e=n,t=a,void s.a.get(e,{responseType:"blob"}).then((function(e){v()(e.data,t)}));var e,t},children:[Object(E.jsx)("i",{className:"fa fa-download","aria-hidden":"true"})," Download"]}),Object(E.jsx)("hr",{})]},t))}};for(l.s();!(r=l.n()).done;)d()}catch(u){l.e(u)}finally{l.f()}return Object(E.jsxs)("main",{className:"col-md-9 ms-sm-auto col-lg-9",style:{padding:"20px"},children:[Object(E.jsxs)("div",{className:"col-8",children:[Object(E.jsxs)("h3",{style:{paddingBottom:"10px"},children:[Object(E.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," Output Files"]}),Object(E.jsx)(ca.a,{tag:"div",blocking:n,children:Object(E.jsxs)("div",{children:["loaded"===a&&c,"unknown"===a&&Object(E.jsx)("p",{children:"Please run the notebook to produce output files ..."}),"loading"===a&&Object(E.jsx)("p",{children:"Loading files please wait ..."}),"error"===a&&Object(E.jsx)("div",{className:"alert alert-danger mb-3",role:"alert",children:"There was an error during loading files. Please try to run the app again or contact the administrator."})]})})]}),Object(E.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:function(){o(H("app"))},children:[Object(E.jsx)("i",{className:"fa fa-arrow-left","aria-hidden":"true"})," Back to App"]})]})}function pa(){return Object(E.jsx)("a",{href:"https://runmercury.com",target:"_blank",rel:"noreferrer",children:Object(E.jsxs)("div",{className:"poweredby",children:[Object(E.jsxs)("div",{className:"text-center",children:[" ",Object(E.jsx)("b",{style:{fontSize:"0.9em"},children:"created with"})," "]}),Object(E.jsx)("div",{children:Object(E.jsx)("img",{alt:"Mercury",src:"/static/mercury_black_logo.svg",style:{height:"27px"}})})]})})}function ja(e){for(var t=e.slug,a=e.widgetsParams,o=e.notebookPath,r=e.columnsWidth,c=e.taskSessionId,l=Object(n.useState)(JSON.stringify({msg:"Example output"})),b=Object(R.a)(l,2),p=b[0],j=b[1],h=Object(i.c)(De),v={},f=0,m=Object.entries(a);f<m.length;f++){var x=Object(R.a)(m[f],2),O=x[0];x[1].input&&(v[O]=h[O])}function g(){return(g=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("get/".concat(c));case 3:t=e.sent,a=t.data,j(JSON.stringify(a)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(n.useEffect)((function(){c&&function(){g.apply(this,arguments)}()}),[c,o]);var y="id-with-some-random-string";c&&(y=c);var w='curl -X POST -H "Content-Type: application/json" -d \''.concat(JSON.stringify(v),"' ").concat(s.a.defaults.baseURL,"/run/").concat(t);return Object(E.jsxs)("div",{className:"ms-sm-auto col-lg-".concat(r),style:{border:"none",paddingTop:"0px",paddingRight:"0px",paddingLeft:"0px",padding:"10px"},children:[Object(E.jsx)("h4",{children:"Notebook as REST API"}),Object(E.jsx)("p",{children:"This notebook can be executed as REST API. Please see the examples below on how to access the notebook."}),Object(E.jsxs)("div",{className:"alert alert-secondary",role:"alert",children:[Object(E.jsx)("h5",{children:"POST request to execute the notebook"}),Object(E.jsx)("textarea",{disabled:!0,style:{width:"100%"},rows:3,value:w}),"The above request should return a JSON with `id`. The `id` should be used in the GET request to fetch the result.",Object(E.jsx)("br",{}),"Example response:",Object(E.jsx)("pre",{children:'{"id": "'.concat(y,'"}')})]}),Object(E.jsxs)("div",{className:"alert alert-secondary",role:"alert",children:[Object(E.jsx)("h5",{children:"GET request to get execution result in JSON"}),Object(E.jsx)("textarea",{disabled:!0,style:{width:"100%"},rows:1,value:"curl ".concat(s.a.defaults.baseURL,"/get/").concat(y)})]}),Object(E.jsxs)("div",{className:"alert alert-primary",role:"alert",children:[Object(E.jsx)("h5",{children:"Response"}),Object(E.jsx)("pre",{children:p})]})]})}function ha(){var e=Object(i.b)(),t=Object(i.c)($e),a=Object(i.c)(Xe),o=Object(i.c)(Ze);return Object(n.useEffect)((function(){""!==a&&o&&(t<120?setTimeout((function(){e(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var n,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/v1/get_pdf/".concat(e,"/"),t.next=4,s.a.get(n);case 4:o=t.sent,(i=o.data).ready?(a(Je()),""!==i.error?p.b.error(i.error):x("".concat(s.a.defaults.baseURL).concat(i.url),"".concat(i.title))):a(Ke()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),p.b.error("The error occured during PDF export. ".concat(t.t0)),a(Je());case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(a))}),1e3):(e(Je()),p.b.error("Problem with PDF export. Please try again later or ask your admin for help.",{autoClose:6e3})))}),[e,t,a,o]),Object(E.jsx)("div",{})}var va=function(e){e.isSingleApp;var t,a,o,r,c,l=e.notebookSlug,b=e.displayEmbed,p=Object(i.b)(),j=Object(i.c)(Ce),h=Object(i.c)(Ae),v=Object(i.c)(Ye),m=Object(i.c)(Ge),x=Object(i.c)(Qe),O=Object(i.c)(J),g=Object(i.c)(Y),y=Object(i.c)(q),w=Object(i.c)(_),k=Object(i.c)(T),N=Object(i.c)(Le),S=Object(i.c)(G),P=Object(i.c)(Ze),C=Object(i.c)(Gt),A=Object(i.c)(Yt),L=Object(i.c)(wt),F=Object(i.c)(Nt),W=function(){var e;return!(null===j||void 0===j||null===(e=j.params)||void 0===e?void 0:e.static_notebook)&&(A!==Ct.UsageLimitReached&&A!==Ct.MaxIdleTimeReached&&A!==Ct.MaxRunTimeReached&&A!==Ct.Running)},I=function(){return"WATCH_READY"===j.state||"WATCH_WAIT"===j.state||"WATCH_ERROR"===j.state};Object(n.useEffect)((function(){void 0!==L&&p(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var n=Object(u.a)(d.a.mark((function n(o){var i,r,c,l,u,b;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a||(o(fe("")),o(qe())),i=ce(),r=i.width,o(z(r>992)),a||o(ve("loading")),c="/api/v1/".concat(e,"/getnb/").concat(t,"/"),n.next=8,s.a.get(c);case 8:l=n.sent,u=l.data,b=JSON.parse(u.params),o(he(Object(U.a)(Object(U.a)({},u),{},{params:b}))),a||o(ve("loaded")),null!==(null===b||void 0===b?void 0:b.show_sidebar)&&void 0!==(null===b||void 0===b?void 0:b.show_sidebar)&&o(z(null===b||void 0===b?void 0:b.show_sidebar)),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),a||o(ve("error")),console.error("Problem during loading selected notebook (".concat(t,"). ").concat(n.t0));case 20:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e){return n.apply(this,arguments)}}()}(L,l))}),[p,L,l,k]),Object(n.useEffect)((function(){var e;"files"===O&&"2"===(null===j||void 0===j||null===(e=j.params)||void 0===e?void 0:e.version)&&void 0!==C&&void 0!==j.id&&p(function(e,t){return function(){var a=Object(u.a)(d.a.mark((function a(n){var o,i,r,c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(B("loading")),n(V([])),o=f(),i="/api/v1/worker-output-files/".concat(o,"/").concat(e,"/").concat(t,"/"),a.next=7,s.a.get(i);case 7:r=a.sent,c=r.data,n(V(c)),n(B("loaded")),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),n(B("error")),console.error("Problem during loading worker output files. ".concat(a.t0));case 17:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()}(C,j.id))}),[p,O,j,C]);var M=j.default_view_path;v.state&&"DONE"===v.state&&v.result&&(M=v.result);var H="";v.state&&v.result&&"ERROR"===v.state&&(H=v.result),m.state&&"DONE"===m.state&&m.result&&(M=m.result),m.state&&m.result&&"ERROR"===m.state&&(H=m.result),M===j.default_view_path&&x.state&&"DONE"===x.state&&x.result&&(M=x.result);var K=!1;return j.output&&j.output.toLowerCase().startsWith("rest")&&(K=!0),Object(E.jsxs)("div",{className:"App",children:[!b&&Object(E.jsx)(D,{isSitePublic:F,username:w}),Object(E.jsxs)(ca.a,{blocking:P,message:"Exporting to PDF. Please wait ...",children:[P&&Object(E.jsx)(ha,{}),Object(E.jsx)("div",{className:"container-fluid",children:Object(E.jsxs)("div",{className:"row",children:[S&&Object(E.jsx)(la,{notebookTitle:j.title,notebookId:j.id,notebookSchedule:j.schedule,taskCreatedAt:v.created_at,loadingState:h,waiting:W(),widgetsParams:null===j||void 0===j||null===(t=j.params)||void 0===t?void 0:t.params,watchMode:I(),notebookPath:M,displayEmbed:b,showFiles:function(e){if(e)for(var t=0,a=Object.entries(e);t<a.length;t++){if(se(Object(R.a)(a[t],2)[1]))return!0}return!1}(null===j||void 0===j||null===(a=j.params)||void 0===a?void 0:a.params),isPresentation:void 0!==j.output&&"slides"===j.output,notebookParseErrors:j.errors,continuousUpdate:null===j||void 0===j||null===(o=j.params)||void 0===o?void 0:o.continuous_update,staticNotebook:null===j||void 0===j||null===(r=j.params)||void 0===r?void 0:r.static_notebook,allowDownload:function(){var e,t;return void 0===j||null===j||(void 0===(null===j||void 0===j||null===(e=j.params)||void 0===e?void 0:e.allow_download)||null===(null===j||void 0===j||null===(t=j.params)||void 0===t?void 0:t.allow_download)||j.params.allow_download)}()}),!S&&Object(E.jsx)("div",{children:Object(E.jsx)("button",{className:"btn btn-sm  btn-outline-primary",type:"button",style:{position:"absolute",top:b?"5px":"50px",left:"5px",zIndex:"2000"},onClick:function(){return p(z(!0))},"data-toggle":"tooltip","data-placement":"right",title:"Show sidebar",children:Object(E.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})})}),K&&Object(E.jsx)(ja,{slug:j.slug,widgetsParams:null===j||void 0===j||null===(c=j.params)||void 0===c?void 0:c.params,notebookPath:M,columnsWidth:S?9:12,taskSessionId:v.session_id}),Object(E.jsx)(ua,{appView:O,loadingState:h,notebookPath:M,errorMsg:H,waiting:W(),watchMode:I(),displayEmbed:b,username:w,slidesHash:N,columnsWidth:S?9:12,isPresentation:void 0!==j.output&&"slides"===j.output,fullScreen:function(){var e,t;return void 0===j||null===j||(void 0===(null===j||void 0===j||null===(e=j.params)||void 0===e?void 0:e.full_screen)||null===(null===j||void 0===j||null===(t=j.params)||void 0===t?void 0:t.full_screen)||j.params.full_screen)}()}),"files"===O&&Object(E.jsx)(ba,{files:g,filesState:y,waiting:W()})]})})]}),b&&Object(E.jsx)(pa,{})]})};function fa(){var e=Object(r.q)().slug,t=Object(r.q)().embed,a=!(!t||"embed"!==t);return Object(E.jsx)(va,{isSingleApp:!1,notebookSlug:e,displayEmbed:a})}function ma(){return Object(E.jsx)("footer",{className:"footer",style:{position:"absolute",bottom:"0",width:"100%",height:"40px",lineHeight:"40px",backgroundColor:"#f5f5f5",borderTop:"1px solid #e5e5e5"},children:Object(E.jsxs)("div",{className:"container",children:[Object(E.jsxs)("span",{className:"text-muted",style:{color:"gray"},children:["Mercury \xa9"," ",Object(E.jsx)("a",{style:{textDecoration:"none",color:"gray"},href:"https://mljar.com",target:"_blank",rel:"noreferrer",children:"MLJAR"})]}),Object(E.jsxs)("span",{className:"text-muted",style:{float:"right"},children:[Object(E.jsx)("a",{style:{textDecoration:"none",color:"gray"},href:"https://github.com/mljar/mercury",target:"_blank",rel:"noreferrer",children:"Mercury"})," ",Object(E.jsx)("i",{className:"fa fa-github","aria-hidden":"true"})]})]})})}function xa(e){var t=e.isSitePublic,a=e.username;return Object(E.jsx)("header",{className:"navbar navbar-dark sticky-top bg-dark p-0",children:Object(E.jsxs)("div",{className:"row",style:{width:"100%",paddingRight:"0px"},children:[Object(E.jsx)("div",{className:"col-4"}),Object(E.jsx)("div",{className:"col-4 text-center",children:Object(E.jsx)("a",{href:"/",children:Object(E.jsx)("img",{alt:"Mercury",src:"/static/mercury_logo.svg",style:{height:"40px"}})})}),Object(E.jsxs)("div",{className:"col-4",style:{marginRight:"0px",paddingRight:"0px"},children:[!t&&""===a&&Object(E.jsx)(A,{}),""!==a&&Object(E.jsx)(L,{username:a})]})]})})}function Oa(){var e=Object(i.b)(),t=Object(n.useState)(""),a=Object(R.a)(t,2),o=a[0],r=a[1],c=Object(n.useState)(""),l=Object(R.a)(c,2),b=l[0],j=l[1],h=Object(n.useState)(""),v=Object(R.a)(h,2),f=v[0],m=v[1],x=Object(i.c)(_),O=Object(i.c)(C),g=Object(i.c)(Nt);return document.body.style.backgroundColor="white",Object(n.useEffect)((function(){e(function(){var e=Object(u.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,s.a.get("/api/v1/auth/user/");case 4:a=e.sent,n=a.data,t(P(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Problem during getting user info. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:g,username:x}),Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("div",{className:"mx-auto",style:{width:"700px"},children:[Object(E.jsxs)("div",{className:"row",style:{marginTop:"40px"},children:[Object(E.jsxs)("h2",{children:[Object(E.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," Account"]}),Object(E.jsxs)("form",{children:[Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Username"}),Object(E.jsx)("input",{className:"form-control",value:O.username,disabled:!0})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"First name"}),Object(E.jsx)("input",{className:"form-control",value:O.first_name,disabled:!0})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Last name"}),Object(E.jsx)("input",{className:"form-control",value:O.last_name,disabled:!0})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Email address"}),Object(E.jsx)("input",{className:"form-control",value:O.email,disabled:!0})]})]})]}),Object(E.jsx)("hr",{}),Object(E.jsxs)("div",{className:"row",children:[Object(E.jsxs)("h2",{children:[Object(E.jsx)("i",{className:"fa fa-key","aria-hidden":"true"})," Change password"]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Old password"}),Object(E.jsx)("input",{type:"password",className:"form-control",value:o,onChange:function(e){return r(e.target.value)}})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"New password"}),Object(E.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){return j(e.target.value)}})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{className:"form-label",children:"Repeat new password"}),Object(E.jsx)("input",{type:"password",className:"form-control",value:f,onChange:function(e){return m(e.target.value)}})]}),Object(E.jsx)("div",{className:"mb-3",style:{paddingBottom:"50px"},children:Object(E.jsx)("button",{className:"btn btn-primary",onClick:function(){return e(function(e,t,a){return function(){var n=Object(u.a)(d.a.mark((function n(o){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=4,s.a.post("/api/v1/auth/password/change/",{old_password:e,new_password1:t,new_password2:a});case 4:p.b.success("Password changed successfully"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),p.b.error("Password not changed. Problem during password change.");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(o,b,f))},disabled:""===o||""===b||""===f,children:"Change password"})})]})]})]})}),Object(E.jsx)(ma,{})]})}var ga=Object(b.b)({name:"version",initialState:{fetchingIsPro:!0,isPro:!1,welcome:""},reducers:{setVersion:function(e,t){var a=t.payload.isPro;e.isPro=a,e.fetchingIsPro=!1},setWelcome:function(e,t){e.welcome=t.payload}}}),ya=ga.reducer,wa=ga.actions,ka=(wa.setVersion,wa.setWelcome),Na=function(e){return e.version.welcome};function Sa(){var e=Object(i.b)(),t=Object(i.c)(Te),a=Object(i.c)(_e),o=Object(i.c)(Na),r=Object(i.c)(_),c=Object(i.c)(T),l=Object(n.useState)(""),b=Object(R.a)(l,2),p=b[0],j=b[1],h=Object(i.c)(wt),v=Object(i.c)(Nt),f=Object(i.c)(kt);Object(n.useEffect)((function(){void 0!==h&&(e(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var n,o,i,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(fe("")),a(je("loading")),a(qe()),n="/api/v1/".concat(e,"/notebooks/"),t.next=7,s.a.get(n);case 7:o=t.sent,i=o.data,r=i.map((function(e){var t=JSON.parse(e.params);return Object(U.a)(Object(U.a)({},e),{},{params:t})})),a(pe(r)),a(je("loaded")),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),a(je("error")),console.error("Problem during loading recent notebooks. ".concat(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}(h)),void 0!==f&&""!==f||e(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){var n,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="/api/v1/".concat(e,"/welcome/"),t.next=4,s.a.get(n);case 4:o=t.sent,i=o.data,a(ka(i.msg)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Problem during loading Mercury welcome message. ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(h)))}),[e,h,c,f]);var m=function(e,t){return null!==e&&void 0!==e?e.slice(0,t)+(e.length>t?" ...":""):""},x=t.map((function(e,t){var a=e.default_view_path;return window.location.origin.startsWith("https")&&(a=a.replace("http://","https://")),"http://localhost:3000"===window.location.origin&&a.startsWith("/media")&&(a="https://127.0.0.1:8000"+a),Object(E.jsx)("div",{className:"col-md-4",style:{paddingBottom:"20px"},children:Object(E.jsxs)("div",{className:"card",children:[Object(E.jsx)("div",{style:{height:"200px",width:"100%",padding:"1px",overflow:"hidden"},children:Object(E.jsx)("iframe",{className:"thumbnailIframe",width:"200%",height:800,src:a,title:"display",scrolling:"no"})}),Object(E.jsxs)("a",{href:"/app/".concat(e.slug),style:{textDecoration:"none",color:"black"},className:"title-card",onMouseEnter:function(){j(e.slug)},onMouseLeave:function(){j("")},children:[Object(E.jsxs)("div",{className:"card-body",style:{borderTop:"1px solid rgba(0,0,0,0.1)",height:"110px"},children:[Object(E.jsx)("h5",{className:"card-title",children:m(e.title,40)}),Object(E.jsx)("p",{className:"card-text",children:m(e.params.description,100)})]}),p===e.slug&&Object(E.jsx)("button",{className:"btn btn-outline-primary",type:"button",style:{zIndex:"101",border:"none",margin:"5px",position:"absolute",right:"0px",bottom:"0px"},"data-toggle":"tooltip","data-placement":"right",title:"Open ".concat(e.title),children:Object(E.jsx)("i",{className:"fa fa-chevron-right","aria-hidden":"true"})})]})]})},"notebook-".concat(e.id,"}"))}));document.body.style.backgroundColor="white";var O=f;return void 0!==O&&""!==O||(O=o),Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:v,username:r}),Object(E.jsxs)("div",{className:"container",style:{paddingBottom:"50px"},children:[""===O&&Object(E.jsx)("h1",{style:{padding:"30px",textAlign:"center"},children:"Welcome!"}),""!==O&&Object(E.jsx)("div",{style:{paddingTop:"20px",paddingBottom:"10px"},children:Object(E.jsx)(Rt.a,{rehypePlugins:[At.a,Et.a,Lt.a,Dt.a],children:O})}),Object(E.jsxs)("div",{className:"row",children:["loading"===a&&Object(E.jsx)("p",{children:"Loading notebooks. Please wait ..."}),"loaded"===a&&0===t.length&&Object(E.jsx)("div",{children:Object(E.jsx)("p",{children:"There are no notebooks available."})}),"error"===a&&Object(E.jsx)("p",{children:"Problem while loading notebooks. Please try again later or contact Mercury administrator."}),x]})]}),Object(E.jsx)(ma,{})]})}function Pa(){var e=Object(i.b)(),t=Object(r.o)(),a=Object(n.useState)(""),o=Object(R.a)(a,2),c=o[0],l=o[1],b=Object(n.useState)(""),j=Object(R.a)(b,2),h=j[0],v=j[1],f=Object(i.c)(Nt);document.body.style.backgroundColor="#f5f5f5";var m="/",x=Object(r.m)();if(x&&x.state){var O=x.state.from;m=O.pathname}return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:f,username:""}),Object(E.jsxs)("div",{className:"div-signin text-center",children:[Object(E.jsxs)("form",{className:"form-signin",onSubmit:function(a){a.preventDefault(),a.stopPropagation(),e(function(e,t,a,n){return function(){var o=Object(u.a)(d.a.mark((function o(i){var r,c,l,u,b,j;return d.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=4,s.a.post("/api/v1/auth/login/",{email:e,password:t});case 4:r=o.sent,c=r.data,i(N(c.key)),i(S(e.split("@")[0])),p.b.success("Log in successfull"),n(a),o.next=16;break;case 12:o.prev=12,o.t0=o.catch(0),"Network Error"===(null===(l=o.t0)||void 0===l?void 0:l.message)?p.b.info("Problem with server connection"):(b=null===(u=l.response)||void 0===u?void 0:u.data,j="Problem during authentication. ",void 0!==b.non_field_errors&&(j+=b.non_field_errors),p.b.error(j));case 16:case"end":return o.stop()}}),o,null,[[0,12]])})));return function(e){return o.apply(this,arguments)}}()}(c,h,m,t))},children:[Object(E.jsx)("h3",{className:"h3 mb-3 font-weight-normal",children:"Please sign in"}),Object(E.jsx)("label",{className:"sr-only",children:"Email"}),Object(E.jsx)("input",{type:"email",id:"inputEmail",className:"form-control",placeholder:"Email",value:c,onChange:function(e){l(e.target.value)},required:!0}),Object(E.jsx)("label",{className:"sr-only",children:"Password"}),Object(E.jsx)("input",{type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",value:h,onChange:function(e){v(e.target.value)},required:!0}),Object(E.jsxs)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",style:{margin:"5px"},disabled:""===c||""===h,children:[Object(E.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})," Log in"]})]}),Object(E.jsx)("div",{className:"mx-auto",style:{width:"400px",marginTop:"40px"},children:Object(E.jsxs)("p",{className:"text-muted",children:["No account? ",Object(E.jsx)("br",{})," Please contact administrator to create account for you."]})})]}),Object(E.jsx)(ma,{})]})}function Ta(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:!0,username:""}),Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Lost connection"}),Object(E.jsx)("p",{children:"App lost connection to the server. Please try again in a moment or contact administrator."})]}),Object(E.jsx)(ma,{})]})}function _a(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:!0,username:""}),Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Access forbidden"}),Object(E.jsxs)("p",{children:["Please ",Object(E.jsx)(c.b,{to:"/login",children:"login"})," to access site."]})]}),Object(E.jsx)(ma,{})]})}function Ca(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:!0,username:""}),Object(E.jsx)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:Object(E.jsx)("p",{style:{color:"gray"},children:"Please wait. Loading site ..."})}),Object(E.jsx)(ma,{})]})}function Ra(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:!0,username:""}),Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Network Error"}),Object(E.jsx)("p",{children:"Please check if you have internet connection and server is running. In case of problems, please contact administrator."})]}),Object(E.jsx)(ma,{})]})}function Ea(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:!0,username:""}),Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Site does not exist"}),Object(E.jsx)("p",{children:"We can't find site you are looking for. Please make sure that URL address is correct."})]}),Object(E.jsx)(ma,{})]})}function Aa(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:!0,username:""}),Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Please refresh"}),Object(E.jsx)("p",{children:"Please try to refresh the website ..."})]}),Object(E.jsx)(ma,{})]})}function La(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(xa,{isSitePublic:!0,username:""}),Object(E.jsxs)("div",{style:{width:"100%",maxWidth:"500px",padding:"15px",margin:"0 auto"},children:[Object(E.jsx)("h3",{children:"Site not ready"}),Object(E.jsx)("p",{children:"Your site is not ready yet. Please refresh page in a while or check the dashboard."}),Object(E.jsx)("button",{className:"btn btn-success",onClick:function(){return window.location.reload()},children:"Refresh"})]}),Object(E.jsx)(ma,{})]})}function Da(e){var t=e.children,a=Object(i.c)(T),o=Object(i.c)(Nt),s=Object(r.m)(),c=Object(i.b)(),l=Object(i.c)(yt);return Object(n.useEffect)((function(){c(St())}),[c]),l===ct.Unknown?Object(E.jsx)(Ca,{}):l===ct.NotFound?Object(E.jsx)(Ea,{}):l===ct.NotReady?Object(E.jsx)(La,{}):l===ct.AccessForbidden?Object(E.jsx)(_a,{}):l===ct.NetworkError?Object(E.jsx)(Ra,{}):l===ct.PleaseRefresh?Object(E.jsx)(Aa,{}):l===ct.LostConnection?(window.location.reload(),Object(E.jsx)(Ta,{})):o||a?t:Object(E.jsx)(r.a,{to:"/login",state:{from:s},replace:!0})}function Ua(e){var t=e.children;return Object(E.jsx)(E.Fragment,{children:t})}function Fa(){return Object(E.jsx)(Da,{children:Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(r.b,{})})})}function Wa(){var e=Object(i.b)();return Object(n.useEffect)((function(){f(!0),localStorage.getItem("token")&&e(N(localStorage.getItem("token"))),localStorage.getItem("username")&&e(S(localStorage.getItem("username"))),e(St())}),[]),Object(E.jsx)(c.a,{children:Object(E.jsx)(Ua,{children:Object(E.jsxs)(r.e,{children:[Object(E.jsxs)(r.c,{path:"/",element:Object(E.jsx)(Fa,{}),children:[Object(E.jsx)(r.c,{path:"/",element:Object(E.jsx)(Sa,{})}),Object(E.jsx)(r.c,{path:"/app/:slug/:embed?",element:Object(E.jsx)(oa,{children:Object(E.jsx)(fa,{})})}),Object(E.jsx)(r.c,{path:"/account",element:Object(E.jsx)(Oa,{})})]}),Object(E.jsx)(r.c,{path:"/login",element:Object(E.jsx)(Pa,{})})]})})})}var Ia=function(e){var t=e.store;e.history;return Object(E.jsx)(i.a,{store:t,children:Object(E.jsx)(Wa,{})})},Ma=a(15),Ha=a(171),Ba=a(32);var Va,za=Object(Ha.a)(),Ka=Object(Ba.b)({notebooks:ue,tasks:Me,version:ya,app:I,auth:w,ws:It,sites:mt}),Ja=Object(Ma.a)(Object(b.c)()),qa=(a(285),a(286),a(288),a(289),a(290),a(291),a(292),a(293),Object(b.a)({reducer:Ka,middleware:Ja,preloadedState:Va}));Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_URL?s.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_LOCAL_URL:"/static"}).REACT_APP_SERVER_URL:"http://localhost:3000"===window.location.origin?s.a.defaults.baseURL="http://127.0.0.1:8000":s.a.defaults.baseURL=window.location.origin,window.location.origin.endsWith("hf.space")&&(s.a.defaults.baseURL=window.location.origin),s.a.defaults.baseURL=s.a.defaults.baseURL.split("+")[0],s.a.defaults.baseURL=s.a.defaults.baseURL.split("?")[0],s.a.defaults.baseURL=s.a.defaults.baseURL.split("#")[0],document.addEventListener("DOMContentLoaded",(function(){return Object(o.render)(Object(E.jsxs)("div",{children:[Object(E.jsx)(Ia,{store:qa,history:za}),Object(E.jsx)(p.a,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0})]}),document.getElementById("root"))}))}},[[295,1,2]]]);
//# sourceMappingURL=main.f9a369a0.chunk.js.map